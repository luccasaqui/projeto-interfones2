<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GERADOR DE DADOS DO INTERFONE INTELIGENTE</title>
    <!-- Inclui o Tailwind CSS para um design limpo e responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0f2f5 0%, #e8edea 50%, #dcdfe3 100%);
        }
        .loomy-logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        .loomy-logo .green {
            color: #8cff00; /* Cor verde do logo */
            letter-spacing: -5px; /* Ajuste para o "oo" do logo */
        }
        .loomy-logo .gray {
            color: #4b5563; /* Cor cinza do logo */
        }
        .loomy-logo .smart {
            font-size: 1rem;
            font-weight: 400;
            color: #4b5563;
        }
        .animated-pulse {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        
        .card-stack {
            position: relative;
            width: 100px;
            height: 60px;
        }
        .card {
            position: absolute;
            width: 100px;
            height: 60px;
            background-color: #e2e8f0;
            border-radius: 8px;
            border: 1px solid #cbd5e1;
            transition: transform 0.5s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card:nth-child(1) {
            transform: translateY(0) rotate(0deg);
            z-index: 3;
            animation: card-move-1 2s ease-in-out infinite;
        }
        .card:nth-child(2) {
            transform: translateY(0) rotate(2deg);
            z-index: 2;
            animation: card-move-2 2s ease-in-out infinite;
        }
        .card:nth-child(3) {
            transform: translateY(0) rotate(-2deg);
            z-index: 1;
            animation: card-move-3 2s ease-in-out infinite;
        }
        @keyframes card-move-1 {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(-5deg); }
        }
        @keyframes card-move-2 {
            0%, 100% { transform: translateY(0) rotate(2deg); }
            50% { transform: translateY(-10px) rotate(0deg); }
        }
        @keyframes card-move-3 {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Logotipo Loomy estático -->
    <div class="mb-8 text-center">
        <h1 class="loomy-logo text-6xl md:text-7xl lg:text-8xl">
            <span class="gray">L</span><span class="green">oo</span><span class="gray">my</span>
        </h1>
        <p class="smart text-base md:text-lg text-gray-600">Smart Solutions</p>
    </div>

    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 w-full max-w-md mx-auto">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">GERADOR DE DADOS DO INTERFONE INTELIGENTE</h1>

        <!-- Seção de Autenticação - Visível por padrão -->
        <div id="authSection" class="space-y-4">
            <h2 class="text-xl font-semibold text-center text-gray-700 mb-4">Validação de Dados</h2>

            <div>
                <label for="nomeCompleto" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                <input type="text" id="nomeCompleto" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Nome completo">
            </div>

            <div>
                <label for="cpf" class="block text-sm font-medium text-gray-700">CPF</label>
                <input type="text" id="cpf" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="000.000.000-00">
            </div>

            <div>
                <label for="numero" class="block text-sm font-medium text-gray-700">Número</label>
                <input type="text" id="numero" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="(DD) 99999-9999">
            </div>

            <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2">
                <button id="avancarBtn" class="w-full md:w-1/2 bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                    Avançar
                </button>
                <button id="devSkipBtn" class="w-full md:w-1/2 bg-gray-500 text-white py-2 px-4 rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors duration-200">
                    PULAR (DEV)
                </button>
            </div>

            <!-- Loading animation -->
            <div id="loadingAnimation" class="hidden flex flex-col items-center justify-center mt-4">
                <div class="card-stack">
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                </div>
                <span class="mt-4 text-gray-700 text-sm font-medium text-center">Aguarde um momentinho enquanto localizamos o seu cadastro.</span>
            </div>

            <div id="authMessageBox" class="mt-4 p-3 rounded-md text-sm text-center hidden"></div>
        </div>

        <!-- Seção do Gerador de Dados - Escondida por padrão -->
        <div id="generatorSection" class="space-y-4 hidden">
            <div>
                <label for="condominio" class="block text-sm font-medium text-gray-700">Condomínio</label>
                <select id="condominio" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    <option value="">Selecione um condomínio...</option>
                    <option value="BENDORF">BENDORF</option>
                    <option value="BRISAS DA SERRA 1 [1-4]">BRISAS DA SERRA 1 [1-4]</option>
                    <option value="BRISAS DA SERRA 2 [5-27]">BRISAS DA SERRA 2 [5-27]</option>
                    <option value="CASA BRANCA">CASA BRANCA</option>
                    <option value="CANTO DO SABIÁ">CANTO DO SABIÁ</option>
                    <option value="CHAPADA DOS LÍRIOS">CHAPADA DOS LÍRIOS</option>
                    <option value="CHAPADA PANTANAL">CHAPADA PANTANAL</option>
                    <option value="COSTA DO CACAU">COSTA DO CACAU</option>
                    <option value="ECOVILAGGIO">ECOVILAGGIO</option>
                    <option value="PONTO GARDÊNIA">PONTO GARDÊNIA</option>
                    <option value="GRANCLUB">GRANCLUB</option>
                    <option value="GRAN SONATA">GRAN SONATA</option>
                    <option value="GRAN VALEY">GRAN VALEY</option>
                    <option value="JOINVILLE">JOINVILLE</option>
                    <option value="LAGOA DAS ESMERALDAS">LAGOA DAS ESMERALDAS</option>
                    <option value="LIBRA">LIBRA</option>
                    <option value="LUZ DO CAMPO">LUZ DO CAMPO</option>
                    <option value="MAIS PARK">MAIS PARK</option>
                    <option value="MARAJÓ">MARAJÓ</option>
                    <option value="BOSQUE DAS MARGARIDAS">BOSQUE DAS MARGARIDAS</option>
                    <option value="MATA ATLÂNTICA">MATA ATLÂNTICA</option>
                    <option value="MORADA CARIOCA">MORADA CARIOCA</option>
                    <option value="MORADA DAS TORRES - CLUB">MORADA DAS TORRES - CLUB</option>
                    <option value="MORADA DE MINAS">MORADA DE MINAS</option>
                    <option value="MORADA DAS TORRES SP">MORADA DAS TORRES SP</option>
                    <option value="MORADA PREMIUM">MORADA PREMIUM</option>
                    <option value="MUSIQUE">MUSIQUE</option>
                    <option value="PARQUE DAS NAÇÕES">PARQUE DAS NAÇÕES</option>
                    <option value="PLAZA NORTE">PLAZA NORTE</option>
                    <option value="LISBOA">LISBOA</option>
                    <option value="PORTO DOURADO 2">PORTO DOURADO 2</option>
                    <option value="PORTO DOURADO 3">PORTO DOURADO 3</option>
                    <option value="RESIDENCIAL SABIÁ">RESIDENCIAL SABIÁ</option>
                    <option value="RIVERA LIFE">RIVERA LIFE</option>
                    <option value="RUBIS">RUBIS</option>
                    <option value="SAN FELIPPO">SAN FELIPPO</option>
                    <option value="SÃO FRANCISCO">SÃO FRANCISCO</option>
                    <option value="SOLAR DOS MONTES">SOLAR DOS MONTES</option>
                    <option value="SOL DO ENGENHO">SOL DO ENGENHO</option>
                    <option value="SPAZIO SALVADOR NORTE">SPAZIO SALVADOR NORTE</option>
                    <option value="SPAZIO SINGULAR">SPAZIO SINGULAR</option>
                    <option value="JARDIM TIRADENTES">JARDIM TIRADENTES</option>
                    <option value="VIC PARK MONTREAL">VIC PARK MONTREAL</option>
                    <option value="VILA DIAMANTE">VILA DIAMANTE</option>
                    <option value="VILA REAL ESMERALDA">VILA REAL ESMERALDA</option>
                    <option value="VILLAS VILLAGE">VILLAS VILLAGE</option>
                    <option value="RESERVA BARRA FUNDA">RESERVA BARRA FUNDA</option>
                    <option value="VIVER FAMA">VIVER FAMA</option>
                    <option value="BOSQUE DAS ÁGUAS">BOSQUE DAS ÁGUAS</option>
                    <option value="BOSQUE DA RIBEIRA">BOSQUE DA RIBEIRA</option>
                    <option value="ESTRELA DE CRISTAL">ESTRELA DE CRISTAL</option>
                    <option value="FONTANA">FONTANA</option>
                    <option value="GOLDEN PLAZA">GOLDEN PLAZA</option>
                    <option value="GREENVILLE">GREENVILLE</option>
                    <option value="LAGUNA">LAGUNA</option>
                    <option value="RECANTO DOS ABRANTES">RECANTO DOS ABRANTES</option>
                    <option value="XINGÚ">XINGÚ</option>
                    <option value="SERRA DOS PINHAIS">SERRA DOS PINHAIS</option>
                    <option value="PONTO DIAMANTE">PONTO DIAMANTE</option>
                    <option value="PONTO VEREDAS">PONTO VEREDAS</option>
                    <option value="VILLAGE EUROPA">VILLAGE EUROPA</option>
                </select>
            </div>

            <div>
                <label for="bloco" class="block text-sm font-medium text-gray-700">Bloco</label>
                <input type="text" id="bloco" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            </div>

            <div>
                <label for="apartamento" class="block text-sm font-medium text-gray-700">Apartamento</label>
                <input type="text" id="apartamento" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Ponto</label>
                <div class="flex space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="ponto" value="1" class="form-radio text-blue-600" checked>
                        <span class="ml-2 text-gray-700">Primeiro Ponto</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="ponto" value="2" class="form-radio text-blue-600">
                        <span class="ml-2 text-gray-700">Segundo Ponto</span>
                    </label>
                </div>
            </div>

            <!-- Nova seção para envio de e-mail -->
            <div class="mt-4 flex items-center justify-between">
                <div class="flex items-center">
                    <input type="checkbox" id="sendEmailCheckbox" class="form-checkbox text-blue-600 h-4 w-4">
                    <label for="sendEmailCheckbox" class="ml-2 text-sm font-medium text-gray-700">Enviar dados por e-mail?</label>
                </div>
            </div>
            
            <div id="emailInputContainer" class="mt-2 hidden">
                <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
                <div class="flex items-center space-x-2">
                    <input type="email" id="email" class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="exemplo@exemplo.com">
                    <button id="sendEmailBtn" class="bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 text-sm disabled:bg-gray-400 disabled:cursor-not-allowed">
                        Enviar
                    </button>
                </div>
                <div id="emailMessage" class="mt-2 text-sm text-center"></div>
            </div>

            <button id="gerarDadosBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                GERAR DADOS
            </button>
        </div>

        <!-- Campos de Saída -->
        <div id="outputSection" class="mt-8 space-y-4 hidden">
            <!-- Usuário -->
            <div>
                <label class="block text-sm font-medium text-gray-700">USUÁRIO</label>
                <div class="flex items-center mt-1">
                    <input type="text" id="usuarioOutput" readonly class="flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-l-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-r-md border border-l-0 border-gray-300 hover:bg-gray-300 focus:outline-none transition-colors duration-200" data-target="usuarioOutput">
                        Copiar
                    </button>
                </div>
            </div>

            <!-- Senha -->
            <div>
                <label class="block text-sm font-medium text-gray-700">SENHA</label>
                <div class="flex items-center mt-1">
                    <input type="text" id="senhaOutput" readonly class="flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-l-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-r-md border border-l-0 border-gray-300 hover:bg-gray-300 focus:outline-none transition-colors duration-200" data-target="senhaOutput">
                        Copiar
                    </button>
                </div>
            </div>

            <!-- Domínio -->
            <div>
                <label class="block text-sm font-medium text-gray-700">DOMÍNIO</label>
                <div class="flex items-center mt-1">
                    <input type="text" id="dominioOutput" readonly class="flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-l-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-r-md border border-l-0 border-gray-300 hover:bg-gray-300 focus:outline-none transition-colors duration-200" data-target="dominioOutput">
                        Copiar
                    </button>
                </div>
            </div>
            
            <div id="messageBox" class="mt-4 p-3 bg-green-100 text-green-700 rounded-md text-sm text-center hidden">
                Texto copiado para a área de transferência!
            </div>
        </div>
        
        <!-- Seção de Avisos e Instruções -->
        <div id="infoSection" class="mt-8 space-y-4 text-center text-gray-700 hidden">
            <div class="flex items-center justify-center p-4 bg-yellow-100 rounded-lg shadow-sm border border-yellow-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.754 1.346-.246 3.099-1.742 3.099H4.417c-1.496 0-2.498-1.753-1.742-3.099l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                </svg>
                <p class="text-sm font-medium text-yellow-700">
                    Se não encontrar o e-mail na sua caixa de entrada, verifique a pasta de lixo eletrônico ou spam.
                </p>
            </div>

            <div class="p-6 bg-white rounded-lg border border-gray-200 shadow-md space-y-4">
                <h3 class="text-lg font-semibold text-gray-800">Como usar o interfone?</h3>
                <ul class="text-left text-sm space-y-2 text-gray-600">
                    <li class="p-2 bg-gray-50 rounded-md">
                        Para ligar para a portaria, digite: <code class="font-bold text-gray-800">94</code>
                    </li>
                    <li id="instrucaoFisico" class="p-2 bg-gray-50 rounded-md">
                        Para ligar para o seu interfone físico, digite: <code class="font-bold text-gray-800"></code>
                    </li>
                    <li id="instrucaoInteligente" class="p-2 bg-gray-50 rounded-md">
                        Para ligar no seu interfone inteligente, digite: <code class="font-bold text-gray-800"></code>
                    </li>
                </ul>
            </div>

            <div class="p-4 bg-gray-100 rounded-lg shadow-sm border border-gray-200">
                <p class="font-semibold text-gray-800 mb-2">Ficou com alguma dúvida?</p>
                <p class="text-sm">
                    Acione o suporte técnico via WhatsApp:
                </p>
                <a href="https://wa.me/551140205322" target="_blank" class="mt-2 inline-block px-4 py-2 bg-green-500 text-white font-medium text-sm rounded-md shadow-md hover:bg-green-600 transition-colors duration-200">
                    Abrir WhatsApp
                </a>
            </div>
        </div>
    </div>

    <script>
        // Mapeamento dos condomínios para domínios e senhas, consolidado das listas fornecidas
        const condominiumData = {
            "BENDORF": { domain: "bendorf.sc.loomy.srv.br", passwordPrefix: "rmt@bendorf" },
            "BRISAS DA SERRA 1 [1-4]": { domain: "brisasdaserra1.mg.loomy.srv.br", passwordPrefix: "rmt@brisas" },
            "BRISAS DA SERRA 2 [5-27]": { domain: "brisasdaserra2.mg.loomy.srv.br", passwordPrefix: "rmt@brisas02#" },
            "CHAPADA DOS LÍRIOS": { domain: "chapadadoslirios.mt.loomy.srv.br", passwordPrefix: "rmt@lirios" },
            "CHAPADA PANTANAL": { domain: "chapadapantanal.mt.loomy.srv.br", passwordPrefix: "rmt@loomy#" },
            "COSTA DO CACAU": { domain: "costadocacau.ba.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "ECOVILAGGIO": { domain: "ecovillagio.go.loomy.srv.br", passwordPrefix: "rmt@ecovilla" },
            "PONTO GARDÊNIA": { domain: "gardenia.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023" },
            "GRANCLUB": { domain: "granclub.go.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "GRAN SONATA": { domain: "gransonata.go.loomy.srv.br", passwordPrefix: "rmt@gransonata" },
            "GRAN VALEY": { domain: "granvalley.go.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "JOINVILLE": { domain: "joinville.sp.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "LAGOA DAS ESMERALDAS": { domain: "lagoadasesmeraldas.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023#" },
            "LIBRA": { domain: "libra.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#2023" },
            "MAIS PARK": { domain: "maispark.mg.loomy.srv.br", passwordPrefix: "rmt@maispark" },
            "MARAJÓ": { domain: "marajo.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "BOSQUE DAS MARGARIDAS": { domain: "margaridas.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "MATA ATLÂNTICA": { domain: "mataatlantica.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "MORADA CARIOCA": { domain: "moradacarioca.sp.loomy.srv.br", passwordPrefix: "rmt@loomy#123" },
            "MORADA DAS TORRES - CLUB": { domain: "moradadastorres.ba.loomy.srv.br", passwordPrefix: "rmt@moradaclub" },
            "MORADA DE MINAS": { domain: "moradademinas.mg.loomy.srv.br", passwordPrefix: "rmt@mdeminas" },
            "MORADA DAS TORRES SP": { domain: "moradadastorres.sp.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "MUSIQUE": { domain: "musique.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "PLAZA NORTE": { domain: "plazanorte.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#" },
            "LISBOA": { domain: "provinciaslisboa.mg.loomy.srv.br", passwordPrefix: "rmt@loomy" },
            "RESIDENCIAL SABIÁ": { domain: "residencialsabia.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#2023" },
            "RIVERA LIFE": { domain: "riveralife.ba.loomy.srv.br", passwordPrefix: "rmt@rivera" },
            "RUBIS": { domain: "rubis.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "SAN FELIPPO": { domain: "sanfelippo.sp.loomy.srv.br", passwordPrefix: "rmt@loomy2023#" },
            "SÃO FRANCISCO": { domain: "saofrancisco.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023#" },
            "SOLAR DOS MONTES": { domain: "solardosmontes.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#2023" },
            "SOL DO ENGENHO": { domain: "soldoengenho.rj.loomy.srv.br", passwordPrefix: "rmt@engenho" },
            "SPAZIO SALVADOR NORTE": { domain: "spaziosalvadornorte.ba.loomy.srv.br", passwordPrefix: "rmt@spaziosalvador" },
            "SPAZIO SINGULAR": { domain: "spaziosingular.ba.loomy.srv.br", passwordPrefix: "rmt@loomy123#" },
            "JARDIM TIRADENTES": { domain: "tiradentes.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023" },
            "VIC PARK MONTREAL": { domain: "vicpark.mg.loomy.srv.br", passwordPrefix: "rmt@vic" },
            "VILA DIAMANTE": { domain: "viladiamante.es.loomy.srv.br", passwordPrefix: "rmt@loomy#26!" },
            "VILA REAL ESMERALDA": { domain: "vilarealesmeralda.mg.loomy.srv.br", passwordPrefix: "rmt@vilareal" },
            "VILLAS VILLAGE": { domain: "villasvillage.ba.loomy.srv.br", passwordPrefix: "rmt@villasvillage" },
            "RESERVA BARRA FUNDA": { domain: "reservabarrafunda.sp.loomy.srv.br", passwordPrefix: "rmt@reservabarrafunda" },
            "LUZ DO CAMPO": { domain: "luzdocampo.sp.loomy.srv.br", passwordPrefix: "rmt@luzdocampo" },
            "MORADA PREMIUM": { domain: "moradapremium.ba.loomy.srv.br", passwordPrefix: "rmt@moradapremium" },
            "PARQUE DAS NAÇÕES": { domain: "parquedasnacoes.ba.loomy.srv.br", passwordPrefix: "rmt@parquedasnacoes" },
            "PORTO DOURADO 3": { domain: "portodourado3.go.loomy.srv.br", passwordPrefix: "rmt@portodourado3" },
            "VILLAGE EUROPA": { domain: "villageeuropa.mg.loomy.srv.br", passwordPrefix: "rmt@villageeuropa" },
            "BOSQUE DAS ÁGUAS": { domain: "bosquedasaguas.mg.loomy.srv.br", passwordPrefix: "rmt@bosqueaguas" },
            "BOSQUE DA RIBEIRA": { domain: "bosquedaribeira.mg.loomy.srv.br", passwordPrefix: "rmt@ribeira" },
            "ESTRELA DE CRISTAL": { domain: "estreladecristal.loomy.srv.br", passwordPrefix: "rmt@cristal#" },
            "GOLDEN PLAZA": { domain: "goldenplaza.sp.loomy.srv.br", passwordPrefix: "rmt@golden" },
            "GREENVILLE": { domain: "greenville.mg.loomy.srv.br", passwordPrefix: "greenville@rmt" },
            "LAGUNA": { domain: "laguna.ba.loomy.srv.br", passwordPrefix: "rmt@laguna" },
            "RECANTO DOS ABRANTES": { domain: "recantodosabrantes.ba.loomy.srv.br", passwordPrefix: "rmt@abrantes" },
            "XINGÚ": { domain: "residencialxingu.mg.loomy.srv.br", passwordPrefix: "rmt@xingu" },
            "SERRA DOS PINHAIS": { domain: "serradospinhais.mg.loomy.srv.br", passwordPrefix: "Loomy@" },
            "VIVER FAMA": { domain: "viverfama.go.loomy.srv.br", passwordPrefix: "rmt@viverfama" },
            "PONTO DIAMANTE": { domain: "pontodiamante.mg.loomy.srv.br", passwordPrefix: "rmt@pontod" },
            "PONTO VEREDAS": { domain: "pontoveredas.mg.loomy.srv.br", passwordPrefix: "rmt@pontoveredas" },
            "FONTANA": { domain: "fontana.mg.loomy.srv.br", passwordPrefix: "rmt@biasca" },
            "PORTO DOURADO 2": { domain: "portodourado2.go.loomy.srv.br", passwordPrefix: "rmt@portodourado" },
            "CASA BRANCA": { domain: "casabranca.mg.loomy.srv.br", passwordPrefix: "rmt@casabranca" }
        };
        
        // Mapeamento de senhas especiais que não usam Bloco, Apartamento e Ponto
        const specialPasswordCondos = [
            "SAN FELIPPO", "SÃO FRANCISCO", "RESIDENCIAL SABIÁ", "JARDIM TIRADENTES",
            "LAGOA DAS ESMERALDAS", "SOLAR DOS MONTES", "LIBRA", "MORADA CARIOCA", "RUBIS",
            "MATA ATLÂNTICA", "COSTA DO CACAU", "SPAZIO SINGULAR", "BOSQUE DAS MARGARIDAS",
            "GRANCLUB", "GRAN VALEY", "JOINVILLE", "MUSIQUE", "MARAJÓ", "MORADA DAS TORRES SP",
            "PONTO GARDÊNIA", "SOLAR DO VALE", "PLAZA NORTE", "ESTRELA DE CRISTAL", "VILA DIAMANTE",
            "GOLDEN PLAZA", "SERRA DOS PINHAIS"
        ];
        
        // Referências para os elementos do DOM
        const authSection = document.getElementById('authSection');
        const generatorSection = document.getElementById('generatorSection');
        const outputSection = document.getElementById('outputSection');
        const infoSection = document.getElementById('infoSection');
        const avancarBtn = document.getElementById('avancarBtn');
        const devSkipBtn = document.getElementById('devSkipBtn');
        const gerarDadosBtn = document.getElementById('gerarDadosBtn');
        const sendEmailBtn = document.getElementById('sendEmailBtn');
        const authMessageBox = document.getElementById('authMessageBox');
        const messageBox = document.getElementById('messageBox');
        const emailMessage = document.getElementById('emailMessage');
        const loadingAnimation = document.getElementById('loadingAnimation');
        const sendEmailCheckbox = document.getElementById('sendEmailCheckbox');
        const emailInputContainer = document.getElementById('emailInputContainer');
        const emailInput = document.getElementById('email');
        const cpfInput = document.getElementById('cpf');
        const numeroInput = document.getElementById('numero');
        const condominioSelect = document.getElementById('condominio');
        const blocoInput = document.getElementById('bloco');
        const apartamentoInput = document.getElementById('apartamento');

        // Função de máscara para CPF
        cpfInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, ''); // Remove tudo que não é dígito
            value = value.slice(0, 11); // Limita a 11 dígitos
            value = value.replace(/(\d{3})(\d)/, '$1.$2'); // Adiciona o primeiro ponto
            value = value.replace(/(\d{3})(\d)/, '$1.$2'); // Adiciona o segundo ponto
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2'); // Adiciona o traço
            e.target.value = value;
        });

        // Função de máscara para Número de Telefone
        numeroInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, ''); // Remove tudo que não é dígito
            value = value.slice(0, 11); // Limita a 11 dígitos
            
            if (value.length > 2) {
                value = value.replace(/^(\d{2})(\d)/g, '($1) $2'); // Adiciona parênteses e espaço
            }
            if (value.length > 9) {
                value = value.replace(/(\d{5})(\d{4})$/, '$1-$2'); // Adiciona traço para 9 dígitos
            } else if (value.length > 8) {
                value = value.replace(/(\d{4})(\d{4})$/, '$1-$2'); // Adiciona traço para 8 dígitos
            }

            e.target.value = value;
        });

        // Evento para o botão "Avançar"
        avancarBtn.addEventListener('click', async () => {
            const nomeCompleto = document.getElementById('nomeCompleto').value.trim();
            const cpf = document.getElementById('cpf').value.trim();
            const numero = document.getElementById('numero').value.trim();

            // Validação simples dos campos de autenticação
            if (!nomeCompleto || !cpf || !numero) {
                showMessage(authMessageBox, "Por favor, preencha todos os campos de autenticação.", "error");
                return;
            }

            // Exibe a animação de carregamento e desabilita os botões
            loadingAnimation.classList.remove('hidden');
            avancarBtn.disabled = true;
            devSkipBtn.disabled = true;

            // Simula uma chamada de API para o IXC Soft (API fictícia)
            const apiResult = await mockIXCSoftApiCall(cpf);

            // Esconde a animação de carregamento e reabilita os botões
            loadingAnimation.classList.add('hidden');
            avancarBtn.disabled = false;
            devSkipBtn.disabled = false;

            if (apiResult.success) {
                // Se a validação for aprovada, preenche os campos do gerador e exibe a seção
                condominioSelect.value = apiResult.data.condominio;
                blocoInput.value = apiResult.data.bloco;
                apartamentoInput.value = apiResult.data.apartamento;
                
                authSection.classList.add('hidden');
                generatorSection.classList.remove('hidden');
            } else {
                showMessage(authMessageBox, apiResult.message, "error");
            }
        });

        // Evento para o botão "PULAR (DEV)"
        devSkipBtn.addEventListener('click', () => {
            authSection.classList.add('hidden');
            generatorSection.classList.remove('hidden');
            hideMessage(authMessageBox); // Esconde a mensagem de erro caso ela esteja visível
        });

        // Função para simular a chamada de API do IXC Soft e retornar dados
        function mockIXCSoftApiCall(cpf) {
            return new Promise(resolve => {
                setTimeout(() => {
                    // Simula a busca e retorno dos dados para o CPF
                    const sanitizedCpf = cpf.replace(/\D/g, '');
                    if (sanitizedCpf === "12345678900") { // CPF de teste para simular erro
                        resolve({ success: false, message: "Não foi possível encontrar seus dados no banco de dados. Por favor, acione o suporte técnico.", linkWhatsApp: true });
                    } else {
                        // Dados fixos para simulação em caso de sucesso
                        const mockData = {
                            condominio: "BENDORF", 
                            bloco: "10",
                            apartamento: "101"
                        };
                        resolve({ success: true, message: "Autenticação bem-sucedida!", data: mockData, linkWhatsApp: false });
                    }
                }, 3000); // 3 segundos de atraso para a animação
            });
        }
        
        // Evento para mostrar/esconder o campo de e-mail e atualizar o texto do botão
        sendEmailCheckbox.addEventListener('change', () => {
            if (sendEmailCheckbox.checked) {
                emailInputContainer.classList.remove('hidden');
            } else {
                emailInputContainer.classList.add('hidden');
                emailMessage.classList.add('hidden');
            }
        });

        // Evento para validar o e-mail e habilitar o botão de envio
        emailInput.addEventListener('input', () => {
            sendEmailBtn.disabled = !validateEmail(emailInput.value);
        });

        function validateEmail(email) {
            // Expressão regular para validar o formato de e-mail
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(String(email).toLowerCase());
        }
        
        // Evento para o botão "GERAR DADOS"
        gerarDadosBtn.addEventListener('click', () => {
            const condominio = condominioSelect.value;
            const bloco = blocoInput.value.trim();
            const apartamento = apartamentoInput.value.trim();
            const ponto = document.querySelector('input[name="ponto"]:checked').value;

            // Validação
            if (!bloco || !apartamento || !condominio) {
                showMessage(messageBox, "Por favor, preencha todos os campos.", "error");
                outputSection.classList.add('hidden');
                infoSection.classList.add('hidden');
                return;
            }

            const condominioInfo = condominiumData[condominio];
            if (!condominioInfo) {
                showMessage(messageBox, "Condomínio não encontrado. Por favor, selecione um válido.", "error");
                outputSection.classList.add('hidden');
                infoSection.classList.add('hidden');
                return;
            }

            // Geração dos dados
            const usuario = `${bloco}${apartamento}${ponto}`;
            
            let senha;
            if (specialPasswordCondos.includes(condominio)) {
                senha = condominioInfo.passwordPrefix;
            } else if (condominio === "RESERVA BARRA FUNDA" && condominioInfo.passwordPrefix) {
                senha = `${condominioInfo.passwordPrefix}${bloco}${apartamento}0${ponto}`;
            } else {
                senha = `${condominioInfo.passwordPrefix}${bloco}${apartamento}${ponto}`;
            }

            const dominio = condominioInfo.domain;

            // Exibição dos dados gerados
            document.getElementById('usuarioOutput').value = usuario;
            document.getElementById('senhaOutput').value = senha;
            document.getElementById('dominioOutput').value = dominio;
            outputSection.classList.remove('hidden');
            hideMessage(messageBox);

            // Atualiza as instruções de uso com os dados gerados
            document.querySelector('#instrucaoFisico code').textContent = `${bloco}${apartamento}`;
            document.querySelector('#instrucaoInteligente code').textContent = `${usuario}`;
            infoSection.classList.remove('hidden');
        });

        // Evento para o botão de enviar e-mail
        sendEmailBtn.addEventListener('click', () => {
            const email = emailInput.value.trim();
            if (!validateEmail(email)) {
                showMessage(emailMessage, "Por favor, insira um e-mail válido.", "error");
                return;
            }
            
            const usuario = document.getElementById('usuarioOutput').value;
            const senha = document.getElementById('senhaOutput').value;
            const dominio = document.getElementById('dominioOutput').value;

            // Exibe mensagem de envio
            showMessage(emailMessage, "Enviando...", "info");
            sendEmailBtn.disabled = true;

            // Simula o envio de e-mail por 15 segundos
            setTimeout(() => {
                // Lógica de envio de e-mail real seria aqui
                console.log(`Simulando envio de e-mail para ${email} com os dados gerados: Usuário=${usuario}, Senha=${senha}, Domínio=${dominio}`);
                showMessage(emailMessage, "Dados enviados para o e-mail!", "success");
                sendEmailBtn.disabled = false;
            }, 15000); // 15 segundos
        });

        // Eventos para os botões de copiar
        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                const targetId = event.target.dataset.target;
                const targetInput = document.getElementById(targetId);
                targetInput.select();
                try {
                    document.execCommand('copy');
                    showMessage(messageBox, "Texto copiado para a área de transferência!", "success");
                } catch (err) {
                    console.error('Falha ao copiar: ', err);
                    alert("Não foi possível copiar o texto. Por favor, copie manualmente.");
                }
            });
        });

        function showMessage(element, text, type) {
            element.textContent = text;
            element.classList.remove('hidden', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700', 'bg-yellow-100', 'text-yellow-700');
            if (type === "success") {
                element.classList.add('bg-green-100', 'text-green-700');
            } else if (type === "error") {
                element.classList.add('bg-red-100', 'text-red-700');
            } else if (type === "info") {
                element.classList.add('bg-yellow-100', 'text-yellow-700', 'animated-pulse');
            }
            element.classList.remove('hidden');
            
            if (type !== "info") {
                 setTimeout(() => {
                    element.classList.add('hidden');
                }, 3000); // Esconde a mensagem após 3 segundos, exceto para "info"
            }
        }

        function hideMessage(element) {
            element.classList.add('hidden');
        }
    </script>

</body>
</html>
